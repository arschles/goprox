syntax = "proto3";

package goproxd;

option go_package = "gen";

service GoProxD {
  rpc GoGet(PackageMeta) returns (FullPackage) {}
  rpc UpgradePackage(FullPackage) returns (Empty) {}
  rpc AddPackage(FullPackage) returns (Empty) {}
  rpc PackageExists(PackageMeta) returns (PackageMeta) {}
}

message PackageMeta {
  string Name = 1;
  string Version = 2;
}

message FullPackage {
  PackageMeta Metadata = 1;
  // the entire package tarball
  bytes Payload = 2;
}

message Empty {}
